@using System.Security.Claims
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - PRN221_Assignment</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/PRN221_Assignment.styles.css" asp-append-version="true" />
    <link rel="shortcut icon" href="~/assets/images/favicon.ico" />
    <link rel="stylesheet" href="~/assets/css/libs.min.css">
    <link rel="stylesheet" href="~/assets/css/socialv.css?v=4.0.0">
    <link rel="stylesheet" href="~/assets/vendor/_fortawesome/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="~/assets/vendor/remixicon/fonts/remixicon.css">
    <link rel="stylesheet" href="~/assets/vendor/vanillajs-datepicker/dist/css/datepicker.min.css">
    <link rel="stylesheet" href="~/assets/vendor/line-awesome/dist/font-awesome-line-awesome/css/all.min.css">
    <link rel="stylesheet" href="~/assets/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css">

    <link rel="stylesheet" href="~/css/site.css" />
    <style>
        .conversation-start {
            text-align: center;
            margin: 10px 0;
            font-size: 12px;
            color: #888;
        }
        
        .chat-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 600px; /* Adjust as needed */
            margin: auto;
        }

        .message-container {
            display: flex;
            flex-direction: column;
            margin-bottom: 8px;
        }

        .outgoing-message {
            background-color: #ADD8E6; /* Soft blue color for outgoing messages */
            color: #000000;
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            text-align: right;
            align-self: flex-end;
            max-width: 70%;
            word-wrap: break-word;
            border: 1px solid #B0E0E6; /* Slightly darker blue border for contrast */
            box-shadow: 0 0 5px rgba(0, 0, 255, 0.1); /* Optional: adding a subtle shadow */
        }

        .incoming-message {
            background-color: #FFFFFF; /* Example background color for incoming messages */
            color: #000000;
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            text-align: left;
            align-self: flex-start;
            max-width: 70%;
            word-wrap: break-word;
            border: 1px solid #ccc; /* Adding a border for the surround */
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1); /* Optional: adding a shadow for a better effect */
        }

        /* Optional: Adjust message padding and margin for smaller screens */


        .chat-box {
            position: fixed;
            bottom: 0;
            width: 300px;
            height: 400px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 10px 10px 0 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            margin-right: 10px;
        }

        .dark-mode-text-input {
            background-color: #333;
            color: #eee;
        }

        .chat-header {
            padding: 10px;
            background-color: #0078d7;
            color: white;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #ccc; /* Add this line for a bottom border */
        }

        .close-button {
            cursor: pointer;
            background: none;
            border: none;
            color: white;
            font-size: 16px;
        }

        .chat-messages {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
        }

        .chat-input {
            display: flex;
            border-top: 1px solid #ccc;
        }

            .chat-input input {
                flex: 1;
                padding: 10px;
                border: none;
                border-radius: 0 0 0 10px;
            }

            .chat-input button {
                padding: 10px;
                background-color: #0078d7;
                color: white;
                border: none;
                border-radius: 0 0 10px 0;
            }
    </style>

</head>
<body>
    @*     <header>
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
    <div class="container">
    <a class="navbar-brand" asp-area="" asp-page="/Index">PRN221_Assignment</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
    <ul class="navbar-nav flex-grow-1">
    <li class="nav-item">
    <a class="nav-link text-dark" asp-area="" asp-page="/Index">Home</a>
    </li>
    <li class="nav-item">
    <a class="nav-link text-dark" asp-area="" asp-page="/Privacy">Privacy</a>
    </li>
    </ul>
    <partial name="_LoginPartial" />
    </div>
    </div>
    </nav>
    </header> *@
    <script src="~/lib/jquery/dist/jquery.min.js"></script>

    <body class="  ">
        <!-- loader Start -->
        <div id="loading">
            <div id="loading-center">
            </div>
        </div>
        <!-- loader END -->
        <!-- Wrapper Start -->
        <div class="wrapper">
            <div class="iq-sidebar sidebar-default ">
                <div id="sidebar-scrollbar">
                    <nav class="iq-sidebar-menu">
                        <ul id="iq-sidebar-toggle" class="iq-menu">
                            <li class="active">
                                <a href="~/dashboard/index.html" class=" ">
                                    <i class="las la-newspaper"></i><span>Newsfeed</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="~/app/profile.html" class=" ">
                                    <i class="las la-user"></i><span>Profile</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="~/app/group.html" class=" ">
                                    <i class="las la-users"></i><span>Group</span>
                                </a>
                            </li>
                            <li class=" ">
                                <a href="~/app/todo.html" class=" ">
                                    <i class="las la-check-circle"></i><span>Todo</span>
                                </a>
                            </li>
                            <li class=" ">
                                <a href="~/dashboard/calendar.html" class=" ">
                                    <i class="las la-calendar"></i><span>Calendar</span>
                                </a>
                            </li>
                            <li class=" ">
                                <a href="#mailbox" data-bs-toggle="collapse" class="  collapsed" aria-expanded="false" onclick="toggleMessageBox();">
                                    <i class="ri-mail-line"></i><span>Email</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                </a>
                                <ul id="mailbox" class="iq-submenu collapse" data-bs-parent="#iq-sidebar-toggle">
                                    <li class="">
                                        <a href="~/app/email.html"><i class="  ri-inbox-line"></i>Inbox</a>
                                    </li>
                                    <li class="">
                                        <a href="~/app/email-compose.html"><i class="ri-edit-line"></i>Email Compose</a>
                                    </li>
                                </ul>
                            </li>

                            <li class="">
                                <a href="#ui-elements" data-bs-toggle="collapse" class="  collapsed"
                                   aria-expanded="false">
                                    <i class="ri-focus-2-line"></i><span>Ui-Elements</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                </a>
                                <ul id="ui-elements" class="iq-submenu collapse"
                                    data-bs-parent="#iq-sidebar-toggle">
                                    <li class="">
                                        <a href="#ui-kit" data-bs-toggle="collapse" class="  collapsed"
                                           aria-expanded="false">
                                            <i class="ri-pencil-ruler-line"></i><span>UI Kit</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                        </a>
                                        <ul id="ui-kit" class="iq-submenu collapse" data-bs-parent="#ui-elements">
                                            <li class="">
                                                <a href="~/dashboard/ui-color.html"><i class="ri-font-color"></i>Colors</a>
                                            </li>
                                            <li class=" ">
                                                <a href="~/dashboard/ui-typography.html"><i class="ri-text"></i>Typography</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-alerts.html"><i class="ri-alert-line"></i>Alerts</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-badges.html"><i class="ri-building-3-line"></i>Badges</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-breadcrumb.html"><i class="ri-menu-2-line"></i>Breadcrumb</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-buttons.html"><i class="ri-checkbox-blank-line"></i>Buttons</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-cards.html"><i class="ri-bank-card-line"></i>Cards</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-carousel.html"><i class="ri-slideshow-line"></i>Carousel</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-embed-video.html"><i class="ri-slideshow-2-line"></i>Video</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-grid.html"><i class="ri-grid-line"></i>Grid</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-images.html"><i class="ri-image-line"></i>Images</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-list-group.html">
                                                    <i class="ri-file-list-3-line"></i>list
                                                    Group
                                                </a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-modal.html"><i class="ri-stop-mini-line"></i>Modal</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-notifications.html"><i class="ri-notification-line"></i>Notifications</a>
                                            </li>
                                            <li class="">
                                                <a href="ui-pagination.html"><i class="ri-pages-line"></i>Pagination</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-popovers.html"><i class="ri-folder-shield-2-line"></i>Popovers</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-progressbars.html"><i class="ri-battery-low-line"></i>Progressbars</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-tabs.html"><i class="ri-database-line"></i>Tabs</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/ui-tooltips.html"><i class="ri-record-mail-line"></i>Tooltips</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="">
                                        <a href="#forms" class="  collapsed" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <i class="ri-profile-line"></i><span>Forms</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                        </a>
                                        <ul id="forms" class="iq-submenu collapse" data-bs-parent="#ui-elements">
                                            <li class="">
                                                <a href="~/dashboard/form-layout.html"><i class="ri-tablet-line"></i>Form Elements</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/form-validation.html">
                                                    <i class="ri-device-line"></i>Form
                                                    Validation
                                                </a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/form-switch.html"><i class="ri-toggle-line"></i>Form Switch</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/form-chechbox.html">
                                                    <i class="ri-checkbox-line"></i>Form
                                                    Checkbox
                                                </a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/form-radio.html"><i class="ri-radio-button-line"></i>Form Radio</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="">
                                        <a href="#wizard-form" class="  collapsed" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <i class="ri-archive-drawer-line"></i>
                                            <span>
                                                Forms
                                                Wizard
                                            </span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                        </a>
                                        <ul id="wizard-form" class="iq-submenu collapse" data-bs-parent="#ui-elements">
                                            <li class="">
                                                <a href="~/dashboard/form-wizard.html"><i class="ri-clockwise-line"></i>Simple Wizard</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/form-wizard-validate.html"><i class="ri-clockwise-2-line"></i>Validate Wizard</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/form-wizard-vertical.html"><i class="ri-anticlockwise-line"></i>Vertical Wizard</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="">
                                        <a href="#tables" class="  collapsed" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <i class="ri-table-line"></i><span>Table</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                        </a>
                                        <ul id="tables" class="iq-submenu collapse" data-bs-parent="#ui-elements">
                                            <li class="">
                                                <a href="~/dashboard/tables-basic.html"><i class="ri-table-line"></i>Basic Tables</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/data-table.html"><i class="ri-database-line"></i>Data Table</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/table-editable.html"><i class="ri-refund-line"></i>Editable Table</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="">
                                        <a href="#icons" class="  collapsed" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <i class="ri-list-check"></i><span>Icons</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                        </a>
                                        <ul id="icons" class="iq-submenu collapse" data-bs-parent="#ui-elements">
                                            <li class="">
                                                <a href="~/dashboard/icon-fontawesome-5.html"><i class="ri-facebook-fill"></i>Font Awesome 5</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/icon-lineawesome.html"><i class="ri-keynote-line"></i>line Awesome</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/icon-remixicon.html"><i class="ri-remixicon-line"></i>Remixicon</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="">
                                <a href="#pages" class="  collapsed" data-bs-toggle="collapse"
                                   aria-expanded="false">
                                    <i class="ri-pages-line"></i><span>Pages</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                </a>
                                <ul id="pages" class="iq-submenu collapse" data-bs-parent="#iq-sidebar-toggle">
                                    <li class="">
                                        <a href="#authentication" class="  collapsed" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <i class="ri-pages-line"></i><span>Authentication</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                        </a>
                                        <ul id="authentication" class="iq-submenu collapse" data-bs-parent="#pages">
                                            <li class="">
                                                <a href="~/dashboard/sign-in.html"><i class="ri-login-box-line"></i>Login</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/sign-up.html"><i class="ri-login-circle-line"></i>Register</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-recoverpw.html"><i class="ri-record-mail-line"></i>Recover Password</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-confirm-mail.html"><i class="ri-file-code-line"></i>Confirm Mail</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-lock-screen.html"><i class="ri-lock-line"></i>Lock Screen</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="">
                                        <a href="#extra-pages" class="  collapsed" data-bs-toggle="collapse"
                                           aria-expanded="false">
                                            <i class="ri-pantone-line"></i><span>Extra Pages</span><i class="ri-arrow-right-s-line iq-arrow-right"></i>
                                        </a>
                                        <ul id="extra-pages" class="iq-submenu collapse" data-bs-parent="#pages">
                                            <li class="">
                                                <a href="~/dashboard/pages-timeline.html"><i class="ri-map-pin-time-line"></i>Timeline</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-invoice.html"><i class="ri-question-answer-line"></i>Invoice</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/blank-page.html"><i class="ri-invision-line"></i>Blank Page</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-error.html"><i class="ri-error-warning-line"></i>Error 404</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-error-500.html"><i class="ri-error-warning-line"></i>Error 500</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-pricing.html"><i class="ri-price-tag-line"></i>Pricing</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-pricing-one.html"><i class="ri-price-tag-2-line"></i>Pricing 1</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-maintenance.html"><i class="ri-archive-line"></i>Maintenance</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-comingsoon.html"><i class="ri-mastercard-line"></i>Coming Soon</a>
                                            </li>
                                            <li class="">
                                                <a href="~/dashboard/pages-faq.html"><i class="ri-compasses-line"></i>Faq</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <div class="p-5"></div>
                </div>
            </div>

            <div class="iq-top-navbar">
                <div class="iq-navbar-custom">
                    <nav class="navbar navbar-expand-lg navbar-light p-0">
                        <div class="iq-navbar-logo d-flex justify-content-between">
                            <a href="/Index">
                                <img src="~/assets/images/logo.png" class="img-fluid" alt="">
                                <span>SocialV</span>
                            </a>
                            <div class="iq-menu-bt align-self-center">
                                <div class="wrapper-menu">
                                    <div class="main-circle">
                                        <i class="ri-menu-line"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="iq-search-bar device-search">
                            <form action="#" class="searchbox">
                                <a class="search-link" href="#">
                                    <i class="ri-search-line"></i>
                                </a>
                                <input type="text" class="text search-input" placeholder="Search here...">
                            </form>
                        </div>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-label="Toggle navigation">
                            <i class="ri-menu-3-line"></i>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav  ms-auto navbar-list">
                                <li>
                                    <a href="~/" class="  d-flex align-items-center">
                                        <i class="ri-home-line"></i>
                                    </a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a href="#" class="dropdown-toggle" id="group-drop" data-bs-toggle="dropdown"
                                       aria-haspopup="true" aria-expanded="false">
                                        <i class="ri-group-line"></i>
                                    </a>
                                    <div class="sub-drop sub-drop-large dropdown-menu" aria-labelledby="group-drop">
                                        <div class="card shadow-none m-0">
                                            <div class="card-header d-flex justify-content-between bg-primary">
                                                <div class="header-title">
                                                    <h5 class="mb-0 text-white">Friend Request</h5>
                                                </div>
                                                <small class="badge  bg-light text-dark ">4</small>
                                            </div>
                                            <div class="card-body p-0">
                                                <div class="iq-friend-request">
                                                    <div class="iq-sub-card iq-sub-card-big d-flex align-items-center justify-content-between">
                                                        <div class="d-flex align-items-center">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/01.jpg"
                                                                 alt="">
                                                            <div class="ms-3">
                                                                <h6 class="mb-0 ">Jaques Amole</h6>
                                                                <p class="mb-0">40 friends</p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center">
                                                            <a href="javascript:void();"
                                                               class="me-3 btn btn-primary rounded">
                                                                Confirm
                                                            </a>
                                                            <a href="javascript:void();"
                                                               class="me-3 btn btn-secondary rounded">
                                                                Delete Request
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="iq-friend-request">
                                                    <div class="iq-sub-card iq-sub-card-big d-flex align-items-center justify-content-between">
                                                        <div class="d-flex align-items-center">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/02.jpg"
                                                                 alt="">
                                                            <div class="ms-3">
                                                                <h6 class="mb-0 ">Lucy Tania</h6>
                                                                <p class="mb-0">12 friends</p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center">
                                                            <a href="javascript:void();"
                                                               class="me-3 btn btn-primary rounded">
                                                                Confirm
                                                            </a>
                                                            <a href="javascript:void();"
                                                               class="me-3 btn btn-secondary rounded">
                                                                Delete Request
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="iq-friend-request">
                                                    <div class="iq-sub-card iq-sub-card-big d-flex align-items-center justify-content-between">
                                                        <div class="d-flex align-items-center">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/03.jpg"
                                                                 alt="">
                                                            <div class=" ms-3">
                                                                <h6 class="mb-0 ">Manny Petty</h6>
                                                                <p class="mb-0">3 friends</p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center">
                                                            <a href="javascript:void();"
                                                               class="me-3 btn btn-primary rounded">
                                                                Confirm
                                                            </a>
                                                            <a href="javascript:void();"
                                                               class="me-3 btn btn-secondary rounded">
                                                                Delete Request
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="iq-friend-request">
                                                    <div class="iq-sub-card iq-sub-card-big d-flex align-items-center justify-content-between">
                                                        <div class="d-flex align-items-center">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/04.jpg"
                                                                 alt="">
                                                            <div class="ms-3">
                                                                <h6 class="mb-0 ">Marsha Mello</h6>
                                                                <p class="mb-0">15 friends</p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center">
                                                            <a href="javascript:void();"
                                                               class="me-3 btn btn-primary rounded">
                                                                Confirm
                                                            </a>
                                                            <a href="javascript:void();"
                                                               class="me-3 btn btn-secondary rounded">
                                                                Delete Request
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="text-center">
                                                    <a href="#" class=" btn text-primary">View More Request</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="nav-item dropdown">
                                    <a href="#" class="search-toggle   dropdown-toggle" id="notification-drop" data-bs-toggle="dropdown">
                                        <i class="ri-notification-4-line"></i>
                                    </a>
                                    <div class="sub-drop dropdown-menu" aria-labelledby="notification-drop">
                                        <div class="card shadow-none m-0">
                                            <div class="card-header d-flex justify-content-between bg-primary">
                                                <div class="header-title bg-primary">
                                                    <h5 class="mb-0 text-white">All Notifications</h5>
                                                </div>
                                                <small class="badge  bg-light text-dark">4</small>
                                            </div>
                                            <div class="card-body p-0">
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/01.jpg" alt="">
                                                        </div>
                                                        <div class="ms-3 w-100">
                                                            <h6 class="mb-0 ">Emma Watson Bni</h6>
                                                            <div class="d-flex justify-content-between align-items-center">
                                                                <p class="mb-0">95 MB</p>
                                                                <small class="float-right font-size-12">Just Now</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/02.jpg" alt="">
                                                        </div>
                                                        <div class="ms-3 w-100">
                                                            <h6 class="mb-0 ">New customer is join</h6>
                                                            <div class="d-flex justify-content-between align-items-center">
                                                                <p class="mb-0">Cyst Bni</p>
                                                                <small class="float-right font-size-12">5 days ago</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/03.jpg" alt="">
                                                        </div>
                                                        <div class="ms-3 w-100">
                                                            <h6 class="mb-0 ">Two customer is left</h6>
                                                            <div class="d-flex justify-content-between align-items-center">
                                                                <p class="mb-0">Cyst Bni</p>
                                                                <small class="float-right font-size-12">2 days ago</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/04.jpg" alt="">
                                                        </div>
                                                        <div class="w-100 ms-3">
                                                            <h6 class="mb-0 ">New Mail from Fenny</h6>
                                                            <div class="d-flex justify-content-between align-items-center">
                                                                <p class="mb-0">Cyst Bni</p>
                                                                <small class="float-right font-size-12">3 days ago</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="nav-item dropdown">
                                    <a href="#" class="dropdown-toggle" id="mail-drop" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="ri-message-line"></i>
                                    </a>
                                    <div class="sub-drop dropdown-menu" aria-labelledby="mail-drop">
                                        <div class="card shadow-none m-0">
                                            <div class="card-header d-flex justify-content-between bg-primary">
                                                <div class="header-title bg-primary">
                                                    <h5 class="mb-0 text-white">All Message</h5>
                                                </div>
                                                <small class="badge bg-light text-dark">4</small>
                                            </div>
                                            <div class="card-body p-0 ">
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex  align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/01.jpg" alt="">
                                                        </div>
                                                        <div class=" w-100 ms-3">
                                                            <h6 class="mb-0 ">Bni Emma Watson</h6>
                                                            <small class="float-left font-size-12">13 Jun</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/02.jpg" alt="">
                                                        </div>
                                                        <div class="ms-3">
                                                            <h6 class="mb-0 ">Lorem Ipsum Watson</h6>
                                                            <small class="float-left font-size-12">20 Apr</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/03.jpg" alt="">
                                                        </div>
                                                        <div class="ms-3">
                                                            <h6 class="mb-0 ">Why do we use it?</h6>
                                                            <small class="float-left font-size-12">30 Jun</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/04.jpg" alt="">
                                                        </div>
                                                        <div class="ms-3">
                                                            <h6 class="mb-0 ">Variations Passages</h6>
                                                            <small class="float-left font-size-12">12 Sep</small>
                                                        </div>
                                                    </div>
                                                </a>
                                                <a href="#" class="iq-sub-card">
                                                    <div class="d-flex align-items-center">
                                                        <div class="">
                                                            <img class="avatar-40 rounded" src="~/assets/images/user/05.jpg" alt="">
                                                        </div>
                                                        <div class="ms-3">
                                                            <h6 class="mb-0 ">Lorem Ipsum generators</h6>
                                                            <small class="float-left font-size-12">5 Dec</small>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="nav-item dropdown">
                                    <a href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i id="changeView" class="ri-sun-line" onclick="toggleDarkMode()"></i>
                                    </a>
                                </li>
                                @if (User.Identity.IsAuthenticated)
                                {
                                    <li class="nav-item dropdown">
                                        <a href="#" class="  d-flex align-items-center dropdown-toggle" id="drop-down-arrow" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <img src="@User.FindFirstValue("profile_picture")" class="img-fluid rounded-circle me-3" alt="user">
                                            <div class="caption">
                                                <h6 class="mb-0 line-height">@User.FindFirstValue(ClaimTypes.NameIdentifier)</h6>
                                            </div>
                                        </a>
                                        <div class="sub-drop dropdown-menu caption-menu" aria-labelledby="drop-down-arrow">
                                            <div class="card shadow-none m-0">
                                                <div class="card-header  bg-primary">
                                                    <div class="header-title">
                                                        <h5 class="mb-0 text-white">Hello @User.FindFirstValue(ClaimTypes.NameIdentifier)</h5>
                                                        <span class="text-white font-size-12">Available</span>
                                                    </div>
                                                </div>
                                                <div class="card-body p-0 ">
                                                    <a href="~/app/profile.html" class="iq-sub-card iq-bg-primary-hover">
                                                        <div class="d-flex align-items-center">
                                                            <div class="rounded card-icon bg-soft-primary">
                                                                <i class="ri-file-user-line"></i>
                                                            </div>
                                                            <div class="ms-3">
                                                                <h6 class="mb-0 ">My Profile</h6>
                                                                <p class="mb-0 font-size-12">View personal profile details.</p>
                                                            </div>
                                                        </div>
                                                    </a>
                                                    <a href="~/app/profile-edit.html" class="iq-sub-card iq-bg-warning-hover">
                                                        <div class="d-flex align-items-center">
                                                            <div class="rounded card-icon bg-soft-warning">
                                                                <i class="ri-profile-line"></i>
                                                            </div>
                                                            <div class="ms-3">
                                                                <h6 class="mb-0 ">Edit Profile</h6>
                                                                <p class="mb-0 font-size-12">Modify your personal details.</p>
                                                            </div>
                                                        </div>
                                                    </a>
                                                    <a href="~/app/account-setting.html" class="iq-sub-card iq-bg-info-hover">
                                                        <div class="d-flex align-items-center">
                                                            <div class="rounded card-icon bg-soft-info">
                                                                <i class="ri-account-box-line"></i>
                                                            </div>
                                                            <div class="ms-3">
                                                                <h6 class="mb-0 ">Account settings</h6>
                                                                <p class="mb-0 font-size-12">Manage your account parameters.</p>
                                                            </div>
                                                        </div>
                                                    </a>
                                                    <a href="~/app/privacy-setting.html" class="iq-sub-card iq-bg-danger-hover">
                                                        <div class="d-flex align-items-center">
                                                            <div class="rounded card-icon bg-soft-danger">
                                                                <i class="ri-lock-line"></i>
                                                            </div>
                                                            <div class="ms-3">
                                                                <h6 class="mb-0 ">Privacy Settings</h6>
                                                                <p class="mb-0 font-size-12">
                                                                    Control your privacy parameters.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </a>
                                                    <div class="d-inline-block w-100 text-center p-3">
                                                        <a asp-page="/Login" asp-page-handler="Logout" class="btn btn-primary iq-sign-btn" role="button">
                                                            Sign out<i class="ri-login-box-line ms-2"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                }
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
            
            @RenderBody()


            <!-- offcanvas start -->

            <div class="offcanvas offcanvas-bottom share-offcanvas" tabindex="-1" id="share-btn" aria-labelledby="shareBottomLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="shareBottomLabel">Share</h5>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body small">
                    <div class="d-flex flex-wrap align-items-center">
                        <div class="text-center me-3 mb-3">
                            <img src="~/assets/images/icon/08.png" class="img-fluid rounded mb-2" alt="">
                            <h6>Facebook</h6>
                        </div>
                        <div class="text-center me-3 mb-3">
                            <img src="~/assets/images/icon/09.png" class="img-fluid rounded mb-2" alt="">
                            <h6>Twitter</h6>
                        </div>
                        <div class="text-center me-3 mb-3">
                            <img src="~/assets/images/icon/10.png" class="img-fluid rounded mb-2" alt="">
                            <h6>Instagram</h6>
                        </div>
                        <div class="text-center me-3 mb-3">
                            <img src="~/assets/images/icon/11.png" class="img-fluid rounded mb-2" alt="">
                            <h6>Google Plus</h6>
                        </div>
                        <div class="text-center me-3 mb-3">
                            <img src="~/assets/images/icon/13.png" class="img-fluid rounded mb-2" alt="">
                            <h6>In</h6>
                        </div>
                        <div class="text-center me-3 mb-3">
                            <img src="~/assets/images/icon/12.png" class="img-fluid rounded mb-2" alt="">
                            <h6>YouTube</h6>
                        </div>
                    </div>
                </div>
            </div>
            <div id="chatContainer" style="position: fixed; bottom: 0; right: 300px; display: flex"></div>

            @* <div class="chat-box" id="chatBox">
            <div class="chat-header" id="chatHeader">
            <span id="chatWith">Chat with</span>
            <button class="close-button" onclick="closeChat()">×</button>
            </div>
            <div class="chat-messages" id="messagesList">
            <!-- Messages will appear here -->
            </div>
            <div class="chat-input">
            <input type="text" id="messageInput" placeholder="Type a message..." />
            <button onclick="sendMessage()">Send</button>
            </div>
            </div> *@
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.js"></script>">
        <script>
            const connection = new signalR.HubConnectionBuilder()
                .withUrl("/chathub")
                .withAutomaticReconnect([0, 0, 10000])
                .build();

            function sendMessage(receiverId) {
                const senderId = '@User.FindFirstValue(ClaimTypes.Authentication)';
                const messageInput = document.getElementById("chatinput-" + receiverId);
                const message = messageInput.value;
                console.log("ok");
                messageInput.value = ''; // Clear the input field
                connection.invoke("SendMessage", senderId, receiverId, message).catch(err => console.error(err.toString()));

                // Display the sent message in a different color
                displayOutgoingMessage(senderId, receiverId, message);
            }

            function displayOutgoingMessage(senderId, receiverId, message) {
                console.log(senderId + " " + receiverId);
                const chatBox = document.getElementById(`chatBox-${senderId}-${receiverId}`);
                if (chatBox) {
                    const messagesList = chatBox.querySelector('.chat-messages');
                    const messageContainer = document.createElement('div'); // Create a container for the message
                    messageContainer.classList.add('message-container'); // Add a class to the container
                    const msg = document.createElement('div'); // Create the message element
                    msg.textContent = `${message}`; // Set the message text
                    msg.classList.add('outgoing-message'); // Add a class to style the message
                    messageContainer.appendChild(msg); // Append the message to the container
                    messagesList.appendChild(messageContainer); // Append the container to the messages list

                    // Scroll to the bottom
                    messagesList.scrollTop = messagesList.scrollHeight;
                }
            }

            connection.on("ReceiveMessage", (user, message) => {
                console.log("receive");
                const chatBox = document.getElementById(`chatBox-@User.FindFirstValue(ClaimTypes.Authentication)-${user}`);
                if (chatBox) {
                    const messagesList = chatBox.querySelector('.chat-messages');
                    const messageContainer = document.createElement('div'); // Create a container for the message
                    messageContainer.classList.add('message-container'); // Add a class to the container
                    const msg = document.createElement('div'); // Create the message element
                    msg.textContent = `${message}`; // Set the message text
                    msg.classList.add('incoming-message'); // Add a class to style the message
                    messageContainer.appendChild(msg); // Append the message to the container
                    messagesList.appendChild(messageContainer); // Append the container to the messages list

                    // Scroll to the bottom
                    messagesList.scrollTop = messagesList.scrollHeight;
                }
            });



            connection.start().catch(err => console.error(err.toString()));
            ///////////////////////////MessageBox
            function toggleMessageBox() {
            
            }
            
            ////////////////////////////DarkMode
            function toggleDarkMode() {
                const body = document.body;
                const isDarkMode = body.classList.toggle('bg-dark');

                // Save the current mode to localStorage
                localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');

                // Toggle bg-dark and text-white for elements containing "iq" in their class names
                const elementsWithIq = document.querySelectorAll('[class*="iq"]');
                elementsWithIq.forEach(element => {
                    element.classList.toggle('bg-dark');
                    element.classList.toggle('text-white');
                });

                // Add text-white to all span elements
                const spanElements = document.querySelectorAll('span');
                spanElements.forEach(span => {
                    span.classList.toggle('text-white');
                });

                const lasElements = document.querySelectorAll('[class*="las"]');
                lasElements.forEach(element => {
                    element.classList.toggle('text-white');
                });

                const cardTextWhiteElements = document.querySelectorAll('[class*="card"]');
                cardTextWhiteElements.forEach(element => {
                    element.classList.toggle('bg-dark');
                    element.classList.toggle('text-white');
                });

                const modalElements = document.querySelectorAll('[class*="modal"]');
                modalElements.forEach(element => {
                    element.classList.toggle('bg-dark');
                });

                const modaltitleElements = document.querySelectorAll('.modal-title');
                modaltitleElements.forEach(element => {
                    element.classList.toggle('text-white');
                });

                // Add text-white to all <h5> and <h6> elements
                const h5Elements = document.querySelectorAll('.card-body h5');
                h5Elements.forEach(element => {
                    element.classList.toggle('text-white');
                });

                const h3Elements = document.querySelectorAll('.profile-detail h3');
                h3Elements.forEach(element => {
                    element.classList.toggle('text-white');
                });

                const h6Elements = document.querySelectorAll('h6');
                h6Elements.forEach(element => {
                    element.classList.toggle('text-white');
                });

                const sidebarPanels = document.querySelectorAll('.right-sidebar-panel');
                sidebarPanels.forEach(panel => {
                    panel.classList.toggle('bg-dark');
                });

                const textInputs = document.querySelectorAll('input[type="text"]');
                textInputs.forEach(input => {
                    input.classList.toggle('dark-mode-text-input');
                });

                const chatElements = document.querySelectorAll('[class*="chat"]');
                chatElements.forEach(element => {
                    element.classList.toggle('bg-dark');
                });

                // Toggle the icon class for the button
                const button = document.getElementById("changeView");
                if (!isDarkMode) {
                    button.classList.remove('ri-moon-line');
                    button.classList.add('ri-sun-line');
                } else {
                    button.classList.remove('ri-sun-line');
                    button.classList.add('ri-moon-line');
                }
            }

            document.addEventListener('DOMContentLoaded', () => {
                const darkMode = localStorage.getItem('darkMode');
                if (darkMode === 'enabled') {
                    toggleDarkMode();
                }
            });

            ///////////////////////////
          
            ////////////////////////////
            document.addEventListener('DOMContentLoaded', function () {
                // Select all dropdown toggle elements
                const dropdownToggles = document.querySelectorAll('.dropdown-toggle');

                dropdownToggles.forEach((dropdownToggle) => {
                    dropdownToggle.addEventListener('click', function (event) {
                        event.preventDefault(); 
                        
                        const parentLi = this.closest('li');
                        const dropdownMenu = parentLi.querySelector('.dropdown-toggle');
                        dropdownMenu.classList.toggle('show');
                        
                        document.querySelectorAll('.dropdown-toggle.show').forEach((menu) => {
                            if (menu !== dropdownMenu) {
                                menu.classList.remove('show');
                            }
                        });
                    });
                });
                
                document.addEventListener('click', function (event) {
                    document.querySelectorAll('.dropdown-menu').forEach((menu) => {
                        if (menu.closest('li')!= null && !menu.closest('li').contains(event.target)) {
                            menu.classList.remove('show');
                        }
                    });
                });
                
                document.querySelectorAll('.dropdown-menu').forEach((dropdownMenu) => {
                    dropdownMenu.addEventListener('click', function (event) {
                        event.stopPropagation(); 
                    });
                });
            });

            
        </script>

    </body>


    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2024 - PRN221_Assignment - <a asp-area="" asp-page="/Privacy">Privacy</a>
        </div>
    </footer>


    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <!-- Wrapper End-->
    <!-- Backend Bundle JavaScript -->
    <script src="~/assets/js/libs.min.js"></script>
    <!-- slider JavaScript -->
    <script src="~/assets/js/slider.js"></script>
    <!-- masonry JavaScript -->
    <script src="~/assets/js/masonry.pkgd.min.js"></script>
    <!-- SweetAlert JavaScript -->
    <script src="~/assets/js/enchanter.js"></script>
    <!-- SweetAlert JavaScript -->
    <script src="~/assets/js/sweetalert.js"></script>
    <!-- app JavaScript -->
    <script src="~/assets/js/charts/weather-chart.js"></script>
    <script src="~/assets/js/app.js"></script>
    <script src="~/assets/vendor/vanillajs-datepicker/dist/js/datepicker.min.js"></script>
    <script src="~/assets/js/lottie.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>